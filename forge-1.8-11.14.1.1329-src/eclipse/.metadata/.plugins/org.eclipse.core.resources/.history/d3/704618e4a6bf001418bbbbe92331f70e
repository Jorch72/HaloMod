package halocraft;

import java.util.Collection;
import java.util.Iterator;

import org.lwjgl.opengl.GL11;

import net.minecraft.client.Minecraft;
import net.minecraft.client.gui.Gui;
import net.minecraft.client.gui.ScaledResolution;
import net.minecraft.client.renderer.Tessellator;
import net.minecraft.client.renderer.WorldRenderer;
import net.minecraft.item.ItemStack;
import net.minecraft.potion.Potion;
import net.minecraft.potion.PotionEffect;
import net.minecraft.util.ResourceLocation;
import net.minecraftforge.client.event.RenderGameOverlayEvent;
import net.minecraftforge.client.event.RenderGameOverlayEvent.ElementType;
import net.minecraftforge.fml.common.eventhandler.EventPriority;
import net.minecraftforge.fml.common.eventhandler.SubscribeEvent;
import net.minecraftforge.fml.common.gameevent.TickEvent.RenderTickEvent;

public class HaloEventHandler extends Gui{
	private Minecraft mc;
	ResourceLocation res = new ResourceLocation("halocraft:textures/gui/HaloOverlay.png");
	 public HaloEventHandler(Minecraft mc){
	    super();
	    // We need this to invoke the render engine.
	    this.mc = mc;
	  }
	  private static final int BUFF_ICON_SIZE = 256;
	  @SubscribeEvent(priority = EventPriority.NORMAL)
	  public void onRenderGameOverlay(RenderGameOverlayEvent event)
	  {
	    if(event.isCancelable() || event.type != ElementType.EXPERIENCE)
	    {      
	      return;
	    }
	    ItemStack helmet = Minecraft.getMinecraft().thePlayer.inventory.armorItemInSlot(3);
	    if (helmet.getItem() == halocraft.Main.SpartanHelmet){
	    // Starting position for the buff bar - 2 pixels from the top left corner.
	    int xPos = 0;
	    int yPos = 0;
	    GL11.glColor4f(1.0F, 1.0F, 1.0F, 1.0F);
	    GL11.glDisable(GL11.GL_LIGHTING);
	    this.mc.renderEngine.bindTexture(res);
	    this.drawTexturedModalRect(xPos, yPos, BUFF_ICON_SIZE, BUFF_ICON_SIZE, mc.displayWidth, mc.displayWidth);
	  }
     }
}
