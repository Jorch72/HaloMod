import static net.minecraftforge.client.event.RenderGameOverlayEvent.ElementType.HELMET;

import java.util.Collection;
import java.util.Iterator;

import net.minecraft.block.Block;
import net.minecraft.client.Minecraft;
import net.minecraft.client.gui.Gui;
import net.minecraft.client.gui.GuiIngame;
import net.minecraft.client.gui.ScaledResolution;
import net.minecraft.client.renderer.Tessellator;
import net.minecraft.item.ItemStack;
import net.minecraft.potion.Potion;
import net.minecraft.potion.PotionEffect;
import net.minecraftforge.event.EventPriority;
import net.minecraftforge.event.ForgeSubscribe;
import org.lwjgl.opengl.GL11;
import org.lwjgl.opengl.GL12;

import cpw.mods.fml.common.FMLCommonHandler;
import net.minecraftforge.client.GuiIngameForge;
import net.minecraftforge.client.event.RenderGameOverlayEvent;
import net.minecraftforge.client.event.RenderGameOverlayEvent.ElementType;
import net.minecraftforge.common.ForgeHooks;
import net.minecraftforge.common.MinecraftForge;
import static net.minecraftforge.client.event.RenderGameOverlayEvent.ElementType.*;

public class  extends GuiIngameForge
{
  private Minecraft mc;
  private RenderGameOverlayEvent eventParent;

  public HudPumpkinOverlay(Minecraft mc)
  {
    super(mc);
    this.mc = mc;
  }
  
  protected void renderHudPumpkinBlur(int par1, int par2)
  {
      GL11.glDisable(GL11.GL_DEPTH_TEST);
      GL11.glDepthMask(false);
      GL11.glBlendFunc(GL11.GL_SRC_ALPHA, GL11.GL_ONE_MINUS_SRC_ALPHA);
      GL11.glColor4f(1.0F, 1.0F, 1.0F, 1.0F);
      GL11.glDisable(GL11.GL_ALPHA_TEST);
      this.mc.renderEngine.bindTexture("%blur%/misc/pumpkinblur.png");
      Tessellator tessellator = Tessellator.instance;
      tessellator.startDrawingQuads();
      tessellator.addVertexWithUV(0.0D, (double)par2, -90.0D, 0.0D, 1.0D);
      tessellator.addVertexWithUV((double)par1, (double)par2, -90.0D, 1.0D, 1.0D);
      tessellator.addVertexWithUV((double)par1, 0.0D, -90.0D, 1.0D, 0.0D);
      tessellator.addVertexWithUV(0.0D, 0.0D, -90.0D, 0.0D, 0.0D);
      tessellator.draw();
      GL11.glDepthMask(true);
      GL11.glEnable(GL11.GL_DEPTH_TEST);
      GL11.glEnable(GL11.GL_ALPHA_TEST);
      GL11.glColor4f(1.0F, 1.0F, 1.0F, 1.0F);
  }
  
  private void renderHudPumpkin(ScaledResolution res, float partialTicks, boolean hasScreen, int mouseX, int mouseY)
  {
	  
	  this.mc.entityRenderer.setupOverlayRendering();
	  GL11.glEnable(GL11.GL_BLEND);
	  
      if (pre(HELMET)) return;
      
      ItemStack itemstack = this.mc.thePlayer.inventory.armorItemInSlot(3);

      if (this.mc.gameSettings.thirdPersonView == 0 && itemstack != null && itemstack.getItem() != null)
      {
          if (itemstack.itemID == HudPumpkin.HudPumpkinItem.itemID)
          {
              renderHudPumpkinBlur(res.getScaledWidth(), res.getScaledHeight());
          }
          else
          {
              itemstack.getItem().renderHelmetOverlay(itemstack, mc.thePlayer, res, partialTicks, hasScreen, mouseX, mouseY);
          }
      }

      post(HELMET);
  }

  private boolean pre(ElementType type)
  {
      return MinecraftForge.EVENT_BUS.post(new RenderGameOverlayEvent.Pre(eventParent, type));
  }
  private void post(ElementType type)
  {
      MinecraftForge.EVENT_BUS.post(new RenderGameOverlayEvent.Post(eventParent, type));
  }
  
  
}